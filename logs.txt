a1@MacBook-Pro-1 solana-mafia % anchor test tests/nft-only.js --provider.cluster devnet --skip-local-validator
warning: unexpected `cfg` condition value: `serde`
   --> programs/solana-mafia/src/lib.rs:117:12
    |
117 | #[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
    |            ^^^^^^^^^^^^^^^^^
    |
    = note: expected values for `feature` are: `anchor-debug`, `cpi`, `custom-heap`, `default`, `idl-build`, `init-if-needed`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `serde` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: `#[warn(unexpected_cfgs)]` on by default

warning: unexpected `cfg` condition value: `serde`
   --> programs/solana-mafia/src/lib.rs:130:12
    |
130 | #[cfg_attr(feature = "serde", derive(serde::Serialize, serde::Deserialize))]
    |            ^^^^^^^^^^^^^^^^^
    |
    = note: expected values for `feature` are: `anchor-debug`, `cpi`, `custom-heap`, `default`, `idl-build`, `init-if-needed`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `serde` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration

warning: unexpected `cfg` condition value: `custom-panic`
   --> programs/solana-mafia/src/lib.rs:141:1
    |
141 | #[program]
    | ^^^^^^^^^^
    |
    = note: expected values for `feature` are: `anchor-debug`, `cpi`, `custom-heap`, `default`, `idl-build`, `init-if-needed`, `no-entrypoint`, `no-idl`, and `no-log-ix-name`
    = help: consider adding `custom-panic` as a feature in `Cargo.toml`
    = note: see <https://doc.rust-lang.org/nightly/rustc/check-cfg/cargo-specifics.html> for more information about checking conditional configuration
    = note: this warning originates in the macro `$crate::custom_panic_default` which comes from the expansion of the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unused imports: `Burn`, `Mint`, and `TokenAccount`
 --> programs/solana-mafia/src/lib.rs:4:26
  |
4 |     token::{self, Token, TokenAccount, Mint, MintTo, Burn}, 
  |                          ^^^^^^^^^^^^  ^^^^          ^^^^
  |
  = note: `#[warn(unused_imports)]` on by default

warning: use of deprecated method `anchor_lang::prelude::AccountInfo::<'a>::realloc`: Use AccountInfo::resize() instead
   --> programs/solana-mafia/src/lib.rs:141:1
    |
141 | #[program]
    | ^^^^^^^^^^
    |
    = note: `#[warn(deprecated)]` on by default
    = note: this warning originates in the attribute macro `program` (in Nightly builds, run with -Z macro-backtrace for more info)

warning: unused variable: `ctx`
   --> programs/solana-mafia/src/lib.rs:677:35
    |
677 | pub fn batch_check_players_status(ctx: Context<BatchCheckPlayersStatus>) -> Result<()> {
    |                                   ^^^ help: if this is intentional, prefix it with an underscore: `_ctx`
    |
    = note: `#[warn(unused_variables)]` on by default

warning: `solana_mafia` (lib) generated 6 warnings (run `cargo fix --lib -p solana_mafia` to apply 1 suggestion)
    Finished `release` profile [optimized] target(s) in 0.42s
WARNING: `idl-build` feature of `anchor-spl` is not enabled. This is likely to result in cryptic compile errors.

        To solve, add `anchor-spl/idl-build` to the `idl-build` feature list:

        [features]
        idl-build = ["anchor-spl/idl-build", ...]

    Finished `test` profile [unoptimized + debuginfo] target(s) in 0.58s
     Running unittests src/lib.rs (/Users/a1/Projects/solana-mafia/target/debug/deps/solana_mafia-002cfe5fd6b5e700)
Deploying cluster: https://api.devnet.solana.com
Upgrade authority: /Users/a1/.config/solana/id.json
Deploying program "solana_mafia"...
Program path: /Users/a1/Projects/solana-mafia/target/deploy/solana_mafia.so...
Program Id: 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7

Signature: 5dseeWchiQk9Wj8MRJvxV2cKbA2f4K9fYygdQ8kTY4odLztRqYpmoBGKwS3SygxWSsgZWqWHHFy3ncy54K82PAym

Deploy success

Found a 'test' script in the Anchor.toml. Running it as a test suite!

Running test suite: "/Users/a1/Projects/solana-mafia/Anchor.toml"

yarn run v1.22.22
$ /Users/a1/Projects/solana-mafia/node_modules/.bin/mocha -t 1000000 tests/ tests/nft-only.js


  üåê DEVNET REAL TESTS
üåê Connecting to Devnet...
Program ID: 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7
Provider wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
üìç PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
Treasury Wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
üí∞ Requesting devnet SOL...
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚úÖ Airdrop successful
Player 1 balance: 0 SOL
Player 2 balance: 0 SOL
    üöÄ DEPLOYMENT & INITIALIZATION
üîß Initializing game...
‚úÖ Initialize transaction: 4aZusTzkauPDwKF8dnJyTpsUw5LyxPBefcQZCMGL1DWcV68GSrW4xpNohtxsR4C2vFiqVjEoDYZ1sJwWm6jCkofC
üìä Game State: {
  authority: 'HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6',
  treasuryWallet: 'HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6',
  totalPlayers: '0',
  isPaused: false
}
‚öôÔ∏è Game Config: {
  entryFee: '100000',
  treasuryFeePercent: 20,
  businessRates: [ 80, 90, 100, 110, 130, 150 ]
}
      ‚úî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä—É –Ω–∞ devnet (2390ms)
    üë• PLAYER MANAGEMENT
üë§ Creating Player 1...
      1) –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Å entry fee
üë§ Creating Player 2...
      2) –°–æ–∑–¥–∞–µ—Ç –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞
    üè¢ BUSINESS OPERATIONS
üè™ Player 1 buying CryptoKiosk...
      3) –ò–≥—Ä–æ–∫ 1 –ø–æ–∫—É–ø–∞–µ—Ç CryptoKiosk (0.1 SOL)
üé∞ Player 2 buying MemeCasino...
      4) –ò–≥—Ä–æ–∫ 2 –ø–æ–∫—É–ø–∞–µ—Ç MemeCasino (0.5 SOL)
    üí∞ EARNINGS & UPGRADES
‚è∞ Waiting and updating earnings...
Update earnings error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî –û–±–Ω–æ–≤–ª—è–µ—Ç earnings –ø–æ—Å–ª–µ –≤—Ä–µ–º–µ–Ω–∏ (6335ms)
‚¨ÜÔ∏è Upgrading Player 1's business...
‚ö†Ô∏è Upgrade error: program.methods.upgradeBusiness is not a function
      ‚úî –ê–ø–≥—Ä–µ–π–¥–∏—Ç –±–∏–∑–Ω–µ—Å (–¥–æ–Ω–∞—Ç –∫–æ–º–∞–Ω–¥–µ) (332ms)
    üìä FINAL STATISTICS
üìä FINAL DEVNET STATISTICS:
==================================================
üéÆ Game Stats:
Players: 0
Businesses: 0
Total Invested: 0 SOL
Total Withdrawn: 0 SOL
Treasury Collected: 0 SOL

üí∞ Balances:
Game Pool (PDA): 0.00095352 SOL
Team Wallet: 4.85760288 SOL

‚öôÔ∏è Config:
Entry Fee: 0.0001 SOL
Treasury Fee: 20%
Business Rates: [80, 90, 100, 110, 130, 150]

üéØ Health Check:
System Value: 4.8585564 SOL
Pending Obligations: 0 SOL
‚úÖ Treasury Health: GOOD
==================================================
      5) –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã

üîó –í–ê–ñ–ù–´–ï –ê–î–†–ï–°–ê –î–õ–Ø –§–†–û–ù–¢–ï–ù–î–ê:
==================================================
Program ID: 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7
Game State PDA: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config PDA: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
Team Wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
Network: devnet
==================================================
      ‚úî üîó –í—ã–≤–æ–¥–∏—Ç –≤–∞–∂–Ω—ã–µ –∞–¥—Ä–µ—Å–∞ –¥–ª—è —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥–∞

  üí∞ ECONOMICS & MATH TESTS
üí∞ Starting Economics Tests - using global game state...
üìç Using Global PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
üë§ New Investors:
Investor 1: AgrariLepg9wk64Nh8WGziuzSGyp9Enc8YtaVtMwUiKe
Investor 2: 4Ff7qUWDeURBhv7os4FwWN2UXR5HxozWGLQdqChcZhgj
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for AgrariLepg9wk64Nh8WGziuzSGyp9Enc8YtaVtMwUiKe
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for 4Ff7qUWDeURBhv7os4FwWN2UXR5HxozWGLQdqChcZhgj
‚úÖ Game already initialized:
- Players: 0
- Businesses: 0
- Treasury Wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
‚ö†Ô∏è Investor1 creation error: Account `owner` not provided.
‚ö†Ô∏è Investor2 creation error: Account `owner` not provided.
    üè™ –°–æ–∑–¥–∞–Ω–∏–µ –±–∏–∑–Ω–µ—Å–æ–≤
‚ö†Ô∏è CryptoKiosk creation error: program.methods.createBusiness is not a function
      ‚úî Investor1 —Å–æ–∑–¥–∞–µ—Ç CryptoKiosk (1517ms)
‚ö†Ô∏è MemeCasino creation error: program.methods.createBusiness is not a function
      ‚úî Investor2 —Å–æ–∑–¥–∞–µ—Ç MemeCasino (2145ms)
    üí∞ Earnings —Å–∏—Å—Ç–µ–º–∞
‚è∞ Waiting for earnings accumulation...
‚ö†Ô∏è Investor1 update error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
‚ö†Ô∏è Investor2 update error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî Earnings –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (8079ms)
    üìä –≠–∫–æ–Ω–æ–º–∏—á–µ—Å–∫–∞—è —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞

üí∞ UPDATED GAME STATISTICS:
==================================================
Total Players: 0
Total Businesses: 0
Total Invested: 0 SOL
Treasury Balance: 0.00095352 SOL
Team Balance: 4.85760288 SOL
Entry Fee: 0.0001 SOL
==================================================
‚ö†Ô∏è Stats error: The expression evaluated to a falsy value:

  assert(gameState.totalPlayers.toNumber() > 0)

      ‚úî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∞–∫—Ç—É–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã (643ms)

  üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
üñºÔ∏è Starting NFT Comprehensive Tests...
üìç Test Setup:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Player 1: FjHvdccHDbyzHAkCC9hv5E2HnrzravNsLNNU9WCSyUYn
Player 2: F7n21CQFA1rrkXimugHpvvtFa4ZKsumtYefkF8WiTiFZ
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for FjHvdccHDbyzHAkCC9hv5E2HnrzravNsLNNU9WCSyUYn
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for F7n21CQFA1rrkXimugHpvvtFa4ZKsumtYefkF8WiTiFZ
‚úÖ Game already initialized
‚ö†Ô∏è NFT Player 1 creation error: Simulation failed. 
Message: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1. 
Logs: 
[
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 invoke [1]",
  "Program log: Instruction: CreatePlayer",
  "Program 11111111111111111111111111111111 invoke [2]",
  "Transfer: insufficient lamports 0, need 8672160",
  "Program 11111111111111111111111111111111 failed: custom program error: 0x1",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 consumed 7524 of 200000 compute units",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 failed: custom program error: 0x1"
]. 
Catch the `SendTransactionError` and call `getLogs()` on it for full details.
‚ö†Ô∏è NFT Player 2 creation error: Simulation failed. 
Message: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1. 
Logs: 
[
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 invoke [1]",
  "Program log: Instruction: CreatePlayer",
  "Program 11111111111111111111111111111111 invoke [2]",
  "Transfer: insufficient lamports 0, need 8672160",
  "Program 11111111111111111111111111111111 failed: custom program error: 0x1",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 consumed 7524 of 200000 compute units",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 failed: custom program error: 0x1"
]. 
Catch the `SendTransactionError` and call `getLogs()` on it for full details.
    üè≠ NFT BUSINESS CREATION
üß™ Creating Underground Pharmacy NFT...
‚ùå NFT Business creation failed: unknown signer: D9vTJpxr3re1VPdH3tcSPiYxkmd3ncg7iaMJRtWw9EDP
Error logs: undefined
      6) Player 1 —Å–æ–∑–¥–∞–µ—Ç Underground Pharmacy —Å NFT
üç∫ Creating Speakeasy Bar NFT...
‚ùå Speakeasy Bar NFT creation failed: unknown signer: 9F1QaHD8Et1EB9jPjE1kGVc5th6KSpZ3s58VZqugktU2
      7) Player 2 —Å–æ–∑–¥–∞–µ—Ç Speakeasy Bar —Å NFT
    ‚¨ÜÔ∏è NFT BUSINESS UPGRADES
‚¨ÜÔ∏è Upgrading Underground Pharmacy NFT...
      8) –ê–ø–≥—Ä–µ–π–¥–∏—Ç Underground Pharmacy NFT –¥–æ —É—Ä–æ–≤–Ω—è 1
    üí∞ NFT EARNINGS & CLAIMS
üí∞ Testing NFT business earnings...
‚è∞ Waiting for earnings accumulation...
‚ö†Ô∏è Earnings update error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî –ü—Ä–æ–≤–µ—Ä—è–µ—Ç —á—Ç–æ earnings –Ω–∞–∫–∞–ø–ª–∏–≤–∞—é—Ç—Å—è –¥–ª—è NFT –±–∏–∑–Ω–µ—Å–æ–≤ (6243ms)
    üî• NFT BUSINESS BURNING
üî• Testing NFT business burn...
      9) –ü—Ä–æ–¥–∞–µ—Ç –∏ —Å–∂–∏–≥–∞–µ—Ç Underground Pharmacy NFT
    üìä NFT DATA QUERIES
üìä Testing NFT data query...
‚ùå NFT Data query failed: AnchorError caused by account: business_nft. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      10) –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ NFT —á–µ—Ä–µ–∑ get_business_nft_data
üìä FINAL NFT STATISTICS:
==================================================
üñºÔ∏è NFT Stats:
Total NFTs Minted: 0
Total NFTs Burned: 0
NFT Serial Counter: 0
Active NFTs: 0

üè¢ Business Stats with NFTs:
Total Businesses: 0
Total Players: 0
Total Invested: 0 SOL
==================================================
      11) –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É NFT —Å–∏—Å—Ç–µ–º—ã
    üîí NFT SECURITY TESTS
üîí Testing NFT ownership protection...
‚úÖ Correctly blocked unauthorized access: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      12) ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É upgrade —á—É–∂–æ–≥–æ NFT
üîí Testing NFT burn protection...
‚úÖ Correctly blocked unauthorized burn: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      13) ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É burn —á—É–∂–æ–≥–æ NFT

  üñºÔ∏è NFT TESTS ONLY
üñºÔ∏è Starting NFT ONLY Tests...
Program ID: 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7
üìç PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Player 1: AfoR15B6VToofao3Mh1JrwrUFFsVPY12tygUVnv6thR
üí∞ MANUAL SOL TRANSFER NEEDED:
Transfer 2 SOL to: AfoR15B6VToofao3Mh1JrwrUFFsVPY12tygUVnv6thR
Use: solana transfer AfoR15B6VToofao3Mh1JrwrUFFsVPY12tygUVnv6thR 2 --allow-unfunded-recipient
‚è∞ Waiting 10 seconds for manual transfer...
Player balance: 0 SOL
‚ùå Need more SOL! Please transfer manually and restart test.
    üè≠ NFT BUSINESS CREATION
üß™ Creating Underground Pharmacy NFT...
üîß NFT Setup:
Mint: 7rRrcFgk3yRw51iX7R4s4GzpEhA1kDeS9hBiBukYd5av
Token Account: GfGRCyEktGJvwLwfzCGg2SBRPKRW4mDnVzDKEXPasTAd
Business NFT PDA: FDcRLvovJEiPaYFaZ3KM9VFfT44CWmeKNuuw1zYqoPwG
‚ùå NFT Business creation FAILED:
Error message: unknown signer: GfGRCyEktGJvwLwfzCGg2SBRPKRW4mDnVzDKEXPasTAd
      14) –°–æ–∑–¥–∞–µ—Ç Underground Pharmacy —Å NFT
    üìä SIMPLE NFT STATUS
üìä NFT SYSTEM STATUS:
===================
Total NFTs Minted: 0
NFT Serial Counter: 0
Total Businesses: 0
===================
‚ö†Ô∏è Status check error: Should have minted at least 1 NFT
      ‚úî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç—É—Å NFT —Å–∏—Å—Ç–µ–º—ã (152ms)

  ‚ö° QUICK ECONOMICS TEST
‚ö° Starting Quick Economics Test...
üìç Using Global PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
üí∞ Please fund test player manually:
solana airdrop 10 2Ch9uF6RBMfTinXWgpHNXHJ3F1pBhcG6j7cLr7otofqi --url devnet
‚è∞ Waiting 3 seconds for manual funding...
‚úÖ Game already initialized
Treasury Wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
Test player balance: 0 SOL
‚ö†Ô∏è Test player needs more SOL. Run:
solana airdrop 10 2Ch9uF6RBMfTinXWgpHNXHJ3F1pBhcG6j7cLr7otofqi --url devnet
‚ö†Ô∏è Business creation error: program.methods.createBusiness is not a function
    ‚úî –°–æ–∑–¥–∞–µ—Ç CryptoKiosk –∏ –ø—Ä–æ–≤–µ—Ä—è–µ—Ç —ç–∫–æ–Ω–æ–º–∏–∫—É (155ms)
‚ö†Ô∏è Upgrade error: program.methods.upgradeBusiness is not a function
    ‚úî –¢–µ—Å—Ç–∏—Ä—É–µ—Ç –∞–ø–≥—Ä–µ–π–¥ (150ms)
üìä QUICK ECONOMICS SUMMARY:
Players: 0
Businesses: 0
Invested: 0 SOL
Treasury: 0.00095352 SOL
Team: 4.85760288 SOL
    ‚úî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —ç–∫–æ–Ω–æ–º–∏—á–µ—Å–∫—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É (442ms)

  üõ°Ô∏è SECURITY & ATTACK TESTS
üõ°Ô∏è Starting Security Tests with global PDAs...
üìç Using Global PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for DSFDqsZ9SHrBFSXzbnYaQessmP6DiJ4kGhp7ew1QTFma
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for EtD6kFDqdZpLes2HGKPavt3KgqFadJvVq3MRrChB4mHv
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for 3p7gZ2vqVCLuTHD83pQSAp7nBZ2aSe4ftHyPZLTRKwuq
‚úÖ Game already initialized
Treasury Wallet: HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
‚ö†Ô∏è Attacker creation error: Account `owner` not provided.
‚ö†Ô∏è Victim creation error: Account `owner` not provided.
‚ö†Ô∏è Whitehat creation error: Account `owner` not provided.
    üö® REENTRANCY ATTACKS
‚ö†Ô∏è Reentrancy test error: program.methods.createBusiness is not a function
      ‚úî ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –¥–≤–æ–π–Ω–æ–π claim_earnings –≤ –æ–¥–Ω–æ–π —Ç—Ä–∞–Ω–∑–∞–∫—Ü–∏–∏ (543ms)
    üîê ACCESS CONTROL ATTACKS
‚úÖ Access control —Ä–∞–±–æ—Ç–∞–µ—Ç: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      15) ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É claim —á—É–∂–∏—Ö earnings
‚úÖ Update earnings protection —Ä–∞–±–æ—Ç–∞–µ—Ç: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      16) ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á—É–∂–∏—Ö earnings
    ‚ö° OVERFLOW/UNDERFLOW ATTACKS
‚úÖ Overflow –∑–∞—â–∏—Ç–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç: program.methods.createBusiness is not a function
      ‚úî ‚ùå –ó–∞—â–∏—â–∞–µ—Ç –æ—Ç overflow –≤ earnings (160ms)
    üõ°Ô∏è DEFENSE SUMMARY

üõ°Ô∏è SECURITY SUMMARY:
‚úÖ Reentrancy attacks: BLOCKED
‚úÖ Drain attacks: BLOCKED
‚úÖ Access control: ENFORCED
‚úÖ Overflow protection: ACTIVE
‚úÖ Rate limiting: WORKING
‚úÖ Business limits: ENFORCED
‚úÖ Economic health: STABLE

üìà Game Statistics:
Total players: 0
Total businesses: 0
Total invested: 0
Total withdrawn: 0

üéØ Security Success Rate: 0%
      ‚úî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∑–∞—â–∏—Ç—ã (151ms)

  solana-mafia
üß™ Starting solana-mafia tests with global PDAs...
üìç Using Global PDAs:
Game State: AXfj87zMh8zeRaiWwQMH8vjyS5PVcP9Ddm3rTUPGdV3E
Game Config: FK4oeyryrEGAmGf7n38sZ7T9Z2B2wVYNC3WiyyUa1sxJ
Treasury PDA: Gh58fNwcBb1HxVFUshVyqzyCeYCkiugzHEMJVDtGUUEU
Server responded with 429 Too Many Requests.  Retrying after 500ms delay...
Server responded with 429 Too Many Requests.  Retrying after 1000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 2000ms delay...
Server responded with 429 Too Many Requests.  Retrying after 4000ms delay...
‚ö†Ô∏è Airdrop failed for HXJuzbw5p8LoAoct2yxyhshoVfT8mgnC4zR1tZFTSDnP
    üîß –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è
‚úÖ Game already initialized:
- Total players: 0
- Total invested: 0
- Entry fee: 100000
‚úÖ –ò–≥—Ä–∞ —É–∂–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω–∞
      ‚úî –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç –∏–≥—Ä–æ–≤–æ–µ —Å–æ—Å—Ç–æ—è–Ω–∏–µ (9592ms)
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –±–ª–æ–∫–∏—Ä—É–µ—Ç –¥–≤–æ–π–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é
      ‚úî ‚ùå –ù–µ –ø–æ–∑–≤–æ–ª—è–µ—Ç –¥–≤–æ–π–Ω—É—é –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é (314ms)
    üë§ –°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä–æ–∫–∞
‚ö†Ô∏è Player creation error: Account `owner` not provided.
      ‚úî –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Å –æ–ø–ª–∞—Ç–æ–π entry fee (1213ms)
    üè¢ –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∏–∑–Ω–µ—Å–∞–º–∏
‚ö†Ô∏è Business creation error: program.methods.createBusiness is not a function
      ‚úî –°–æ–∑–¥–∞–µ—Ç –Ω–æ–≤—ã–π –±–∏–∑–Ω–µ—Å –ø–æ—Å–ª–µ —Å–æ–∑–¥–∞–Ω–∏—è –∏–≥—Ä–æ–∫–∞ (574ms)
‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–æ –æ—Ç–∫–ª–æ–Ω–∏–ª –º–∞–ª–µ–Ω—å–∫–∏–π –¥–µ–ø–æ–∑–∏—Ç
      ‚úî ‚ùå –û—Ç–∫–ª–æ–Ω—è–µ—Ç –Ω–µ–¥–æ—Å—Ç–∞—Ç–æ—á–Ω—ã–π –¥–µ–ø–æ–∑–∏—Ç (160ms)
    üí∞ –ó–∞—Ä–∞–±–æ—Ç–∫–∏ –∏ –≤—ã–ø–ª–∞—Ç—ã
‚è∞ –û–∂–∏–¥–∞–Ω–∏–µ –Ω–∞–∫–æ–ø–ª–µ–Ω–∏—è –∑–∞—Ä–∞–±–æ—Ç–∫–æ–≤...
‚ö†Ô∏è Update earnings error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî –û–±–Ω–æ–≤–ª—è–µ—Ç –∑–∞—Ä–∞–±–æ—Ç–∫–∏ —Å–æ –≤—Ä–µ–º–µ–Ω–µ–º (5743ms)
‚ö†Ô∏è Claim earnings error: Account does not exist or has no data F1DPexAQJZgkKfMracyafpuF8DQcXpQH78GPSoEm7qvw
      ‚úî –ü–æ–∑–≤–æ–ª—è–µ—Ç –∑–∞–±—Ä–∞—Ç—å –∑–∞—Ä–∞–±–æ—Ç–∫–∏ (153ms)
    ‚¨ÜÔ∏è –ê–ø–≥—Ä–µ–π–¥—ã –±–∏–∑–Ω–µ—Å–∞
‚ö†Ô∏è Upgrade error: program.methods.upgradeBusiness is not a function
      ‚úî –ê–ø–≥—Ä–µ–π–¥–∏—Ç –±–∏–∑–Ω–µ—Å (150ms)
    üîí –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å –∏ –∞–¥–º–∏–Ω-—Ñ—É–Ω–∫—Ü–∏–∏
‚ö†Ô∏è Health check error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî Health check –∏–≥—Ä–æ–∫–∞ —Ä–∞–±–æ—Ç–∞–µ—Ç (322ms)
üìä –°—Ç–∞—Ç–∏—Å—Ç–∏–∫–∞ –∏–≥—Ä—ã:
- –í—Å–µ–≥–æ –∏–≥—Ä–æ–∫–æ–≤: 0
- –í—Å–µ–≥–æ –∏–Ω–≤–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–æ: 0
- –í—Å–µ–≥–æ –±–∏–∑–Ω–µ—Å–æ–≤: 0
- Entry fee: 100000
- –ù–∞ –ø–∞—É–∑–µ: false
      ‚úî –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã (315ms)
    üñºÔ∏è NFT BUSINESS TESTS
‚ö†Ô∏è NFT test error: AnchorError caused by account: player. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      ‚úî –°–æ–∑–¥–∞–µ—Ç –±–∏–∑–Ω–µ—Å —Å NFT (490ms)


  27 passing (3m)
  16 failing

  1) üåê DEVNET REAL TESTS
       üë• PLAYER MANAGEMENT
         –°–æ–∑–¥–∞–µ—Ç –ø–µ—Ä–≤–æ–≥–æ –∏–≥—Ä–æ–∫–∞ —Å entry fee:
     Simulation failed. 
Message: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1. 
Logs: 
[
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 invoke [1]",
  "Program log: Instruction: CreatePlayer",
  "Program 11111111111111111111111111111111 invoke [2]",
  "Transfer: insufficient lamports 0, need 8672160",
  "Program 11111111111111111111111111111111 failed: custom program error: 0x1",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 consumed 7524 of 200000 compute units",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 failed: custom program error: 0x1"
]. 
Catch the `SendTransactionError` and call `getLogs()` on it for full details.
  

  2) üåê DEVNET REAL TESTS
       üë• PLAYER MANAGEMENT
         –°–æ–∑–¥–∞–µ—Ç –≤—Ç–æ—Ä–æ–≥–æ –∏–≥—Ä–æ–∫–∞:
     Simulation failed. 
Message: Transaction simulation failed: Error processing Instruction 0: custom program error: 0x1. 
Logs: 
[
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 invoke [1]",
  "Program log: Instruction: CreatePlayer",
  "Program 11111111111111111111111111111111 invoke [2]",
  "Transfer: insufficient lamports 0, need 8672160",
  "Program 11111111111111111111111111111111 failed: custom program error: 0x1",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 consumed 12024 of 200000 compute units",
  "Program 3Ly6bEWRfKyVGwrRN27gHhBogo1K4HbZyk69KHW9AUx7 failed: custom program error: 0x1"
]. 
Catch the `SendTransactionError` and call `getLogs()` on it for full details.
  

  3) üåê DEVNET REAL TESTS
       üè¢ BUSINESS OPERATIONS
         –ò–≥—Ä–æ–∫ 1 –ø–æ–∫—É–ø–∞–µ—Ç CryptoKiosk (0.1 SOL):
     TypeError: program.methods.createBusiness is not a function
      at Context.<anonymous> (tests/devnet-real-test.js:198:10)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  4) üåê DEVNET REAL TESTS
       üè¢ BUSINESS OPERATIONS
         –ò–≥—Ä–æ–∫ 2 –ø–æ–∫—É–ø–∞–µ—Ç MemeCasino (0.5 SOL):
     TypeError: program.methods.createBusiness is not a function
      at Context.<anonymous> (tests/devnet-real-test.js:253:10)
      at process.processImmediate (node:internal/timers:505:21)

  5) üåê DEVNET REAL TESTS
       üìä FINAL STATISTICS
         –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É –∏–≥—Ä—ã:

      AssertionError [ERR_ASSERTION]: Should have players
      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/devnet-real-test.js:395:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  6) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üè≠ NFT BUSINESS CREATION
         Player 1 —Å–æ–∑–¥–∞–µ—Ç Underground Pharmacy —Å NFT:
     Error: unknown signer: D9vTJpxr3re1VPdH3tcSPiYxkmd3ncg7iaMJRtWw9EDP
      at Transaction._addSignature (node_modules/@solana/web3.js/lib/index.cjs.js:1789:13)
      at /Users/a1/Projects/solana-mafia/node_modules/@solana/web3.js/lib/index.cjs.js:1765:12
      at Array.forEach (<anonymous>)
      at Transaction._partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1763:13)
      at Transaction.partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1755:10)
      at AnchorProvider.sendAndConfirm (node_modules/@coral-xyz/anchor/dist/cjs/provider.js:92:24)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/rpc.js:15:24)
      at async Context.<anonymous> (tests/nft-comprehensive-test.js:142:20)

  7) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üè≠ NFT BUSINESS CREATION
         Player 2 —Å–æ–∑–¥–∞–µ—Ç Speakeasy Bar —Å NFT:
     Error: unknown signer: 9F1QaHD8Et1EB9jPjE1kGVc5th6KSpZ3s58VZqugktU2
      at Transaction._addSignature (node_modules/@solana/web3.js/lib/index.cjs.js:1789:13)
      at /Users/a1/Projects/solana-mafia/node_modules/@solana/web3.js/lib/index.cjs.js:1765:12
      at Array.forEach (<anonymous>)
      at Transaction._partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1763:13)
      at Transaction.partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1755:10)
      at AnchorProvider.sendAndConfirm (node_modules/@coral-xyz/anchor/dist/cjs/provider.js:92:24)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/rpc.js:15:24)
      at async Context.<anonymous> (tests/nft-comprehensive-test.js:251:20)

  8) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       ‚¨ÜÔ∏è NFT BUSINESS UPGRADES
         –ê–ø–≥—Ä–µ–π–¥–∏—Ç Underground Pharmacy NFT –¥–æ —É—Ä–æ–≤–Ω—è 1:
     TypeError: Cannot read properties of undefined (reading 'fetch')
      at Context.<anonymous> (tests/nft-comprehensive-test.js:300:67)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  9) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üî• NFT BUSINESS BURNING
         –ü—Ä–æ–¥–∞–µ—Ç –∏ —Å–∂–∏–≥–∞–µ—Ç Underground Pharmacy NFT:
     Error: Account does not exist or has no data XiVCzXjzPeTHCjaC96hUL7aueQb7pQ3m1B2Y5tb62UB
      at AccountClient.fetch (node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/account.js:110:19)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (tests/nft-comprehensive-test.js:413:29)

  10) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üìä NFT DATA QUERIES
         –ü–æ–ª—É—á–∞–µ—Ç –¥–∞–Ω–Ω—ã–µ NFT —á–µ—Ä–µ–∑ get_business_nft_data:
     Error: AnchorError caused by account: business_nft. Error Code: AccountNotInitialized. Error Number: 3012. Error Message: The program expected this account to be already initialized.
      at AnchorError.parse (node_modules/@coral-xyz/anchor/dist/cjs/error.js:140:20)
      at translateError (node_modules/@coral-xyz/anchor/dist/cjs/error.js:226:37)
      at MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/rpc.js:18:53)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async Context.<anonymous> (tests/nft-comprehensive-test.js:487:20)

  11) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üìä NFT DATA QUERIES
         –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Ñ–∏–Ω–∞–ª—å–Ω—É—é —Å—Ç–∞—Ç–∏—Å—Ç–∏–∫—É NFT —Å–∏—Å—Ç–µ–º—ã:

      AssertionError [ERR_ASSERTION]: Should have minted at least 2 NFTs
      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/nft-comprehensive-test.js:537:7)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  12) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üîí NFT SECURITY TESTS
         ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É upgrade —á—É–∂–æ–≥–æ NFT:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(error.message.includes("ConstraintSeeds") || 
         error.message.includes("constraint"))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/nft-comprehensive-test.js:567:9)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  13) üñºÔ∏è NFT BUSINESS COMPREHENSIVE TESTS
       üîí NFT SECURITY TESTS
         ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É burn —á—É–∂–æ–≥–æ NFT:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(error.message.includes("ConstraintSeeds") || 
         error.message.includes("constraint") ||
         error.message.includes("BusinessNotOwned"))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/nft-comprehensive-test.js:596:9)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  14) üñºÔ∏è NFT TESTS ONLY
       üè≠ NFT BUSINESS CREATION
         –°–æ–∑–¥–∞–µ—Ç Underground Pharmacy —Å NFT:
     Error: unknown signer: GfGRCyEktGJvwLwfzCGg2SBRPKRW4mDnVzDKEXPasTAd
      at Transaction._addSignature (node_modules/@solana/web3.js/lib/index.cjs.js:1789:13)
      at /Users/a1/Projects/solana-mafia/node_modules/@solana/web3.js/lib/index.cjs.js:1765:12
      at Array.forEach (<anonymous>)
      at Transaction._partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1763:13)
      at Transaction.partialSign (node_modules/@solana/web3.js/lib/index.cjs.js:1755:10)
      at AnchorProvider.sendAndConfirm (node_modules/@coral-xyz/anchor/dist/cjs/provider.js:92:24)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)
      at async MethodsBuilder.rpc [as _rpcFn] (node_modules/@coral-xyz/anchor/dist/cjs/program/namespace/rpc.js:15:24)
      at async Context.<anonymous> (tests/nft-only.js:152:20)

  15) üõ°Ô∏è SECURITY & ATTACK TESTS
       üîê ACCESS CONTROL ATTACKS
         ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –ø–æ–ø—ã—Ç–∫—É claim —á—É–∂–∏—Ö earnings:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(error.message.includes("ConstraintSeeds") || 
         error.message.includes("seeds constraint") ||
         error.message.includes("A seeds constraint was violated"))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/security-tests.js:203:9)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)

  16) üõ°Ô∏è SECURITY & ATTACK TESTS
       üîê ACCESS CONTROL ATTACKS
         ‚ùå –ë–ª–æ–∫–∏—Ä—É–µ—Ç –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —á—É–∂–∏—Ö earnings:

      AssertionError [ERR_ASSERTION]: The expression evaluated to a falsy value:

  assert(error.message.includes("ConstraintSeeds") || 
         error.message.includes("UnauthorizedAdmin") ||
         error.message.includes("A seeds constraint was violated"))

      + expected - actual

      -false
      +true
      
      at Context.<anonymous> (tests/security-tests.js:225:9)
      at process.processTicksAndRejections (node:internal/process/task_queues:105:5)



error Command failed with exit code 16.