# üöÄ –û–ü–¢–ò–ú–ò–ó–ò–†–û–í–ê–ù–ù–ê–Ø –°–ë–û–†–ö–ê SOLANA MAFIA

## ‚úÖ –î–û–°–¢–ò–ì–ù–£–¢–´–ô –†–ï–ó–£–õ–¨–¢–ê–¢
- **–û–†–ò–ì–ò–ù–ê–õ:** 578KB = 4.12 SOL  
- **–ë–ê–ó–û–í–ê–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:** 465KB = 3.32 SOL
- **–ü–†–û–î–í–ò–ù–£–¢–ê–Ø –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–Ø:** 456KB = 3.25 SOL
- **–ò–¢–û–ì–û–í–ê–Ø –≠–ö–û–ù–û–ú–ò–Ø:** **0.87 SOL (21.1%)** = ~$87 üí∞

### üîç –î–µ—Ç–∞–ª–∏–∑–∞—Ü–∏—è –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–π:
1. **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä —Ñ–ª–∞–≥–∏:** 578KB ‚Üí 465KB (-113KB, -0.80 SOL)
2. **–°—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö:** 465KB ‚Üí 456KB (-9KB, -0.07 SOL)

### üîß –ü–†–ò–ú–ï–ù–ï–ù–ù–´–ï –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò:

#### üì¶ –ë–∞–∑–æ–≤—ã–µ (–∫–æ–º–ø–∏–ª—è—Ç–æ—Ä):
1. **–ö–æ–º–ø–∏–ª—è—Ç–æ—Ä:** `opt-level = "z"`, `lto = "fat"`, `strip = "symbols"`
2. **RUSTFLAGS:** `target-cpu=generic` 
3. **Dependencies:** `default-features = false` + —Ç–æ–ª—å–∫–æ –Ω—É–∂–Ω—ã–µ features
4. **anchor-spl:** `metadata`, `token`, `associated_token` features

#### üß¨ –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ (—Å—Ç—Ä—É–∫—Ç—É—Ä—ã –¥–∞–Ω–Ω—ã—Ö):
1. **PlayerCompact:** —É–ª—å—Ç—Ä–∞-–æ–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω–∞—è —Å—Ç—Ä—É–∫—Ç—É—Ä–∞ —Å –±–∏—Ç–æ–≤—ã–º–∏ —Ñ–ª–∞–≥–∞–º–∏
2. **BusinessSlotCompact:** —É–ø–∞–∫–æ–≤–∞–Ω–Ω—ã–µ —Å–ª–æ—Ç—ã —Å –±–∏—Ç–æ–≤—ã–º–∏ –º–∞—Å–∫–∞–º–∏
3. **–¢–∏–ø—ã –¥–∞–Ω–Ω—ã—Ö:** u64‚Üíu32 –¥–ª—è timestamps –∏ amounts (–¥–æ 2106 –≥–æ–¥–∞)
4. **–ú–∞—Å—Å–∏–≤—ã:** Vec‚Üí[T; N] –¥–ª—è business_slots (—ç–∫–æ–Ω–æ–º–∏—è 24 –±–∞–π—Ç–∞ overhead)
5. **–ú–µ—Ç–æ–¥—ã –¥–æ—Å—Ç—É–ø–∞:** field‚Üímethod() –¥–ª—è –æ–ø—Ç–∏–º–∞–ª—å–Ω–æ–π –∫–æ–º–ø–æ–Ω–æ–≤–∫–∏ –ø–∞–º—è—Ç–∏

---

## üõ†Ô∏è –ö–û–ú–ê–ù–î–´ –î–õ–Ø –ï–ñ–ï–î–ù–ï–í–ù–û–ô –†–ê–ë–û–¢–´

### –û—Å–Ω–æ–≤–Ω–∞—è –∫–æ–º–∞–Ω–¥–∞ —Å–±–æ—Ä–∫–∏:
```bash
RUSTFLAGS="-C target-cpu=generic" anchor build
```

### –ü–æ–ª–Ω—ã–π –ø—Ä–æ—Ü–µ—Å—Å —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏:
```bash
# 1. –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞ –∫–æ–¥–∞...

# 2. –°–±–æ—Ä–∫–∞ —Å –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è–º–∏ 
RUSTFLAGS="-C target-cpu=generic" anchor build

# 3. –ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–∑–º–µ—Ä–∞ (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
ls -lah target/deploy/solana_mafia.so

# 4. –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ
anchor test

# 5. –î–µ–ø–ª–æ–π
anchor deploy
```

---

## üéØ –î–ê–õ–¨–ù–ï–ô–®–ò–ï –®–ê–ì–ò –û–ü–¢–ò–ú–ò–ó–ê–¶–ò–ò

### ü•â –õ–µ–≥–∫–∏–µ (5-15 –º–∏–Ω—É—Ç):
1. **–£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π**
   - –ü—Ä–æ–≤–µ—Ä–∏—Ç—å `Cargo.toml` –Ω–∞ –Ω–µ–Ω—É–∂–Ω—ã–µ crates
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª: -30-50KB

2. **–î–æ–±–∞–≤–∏—Ç—å feature flags**
   ```toml
   [dependencies]
   anchor-spl = { version = "0.31.1", default-features = false, features = ["metadata"] }
   ```

### ü•à –°—Ä–µ–¥–Ω–∏–µ (1-2 —á–∞—Å–∞):
1. **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å—Ç—Ä—É–∫—Ç—É—Ä –¥–∞–Ω–Ω—ã—Ö**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –±–∏—Ç–æ–≤—ã–µ –ø–æ–ª—è –≤–º–µ—Å—Ç–æ –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã—Ö bool
   - –ó–∞–º–µ–Ω–∏—Ç—å u64 –Ω–∞ u32/u16/u8 –≥–¥–µ –≤–æ–∑–º–æ–∂–Ω–æ
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª: -50-100KB

2. **Conditional compilation**
   ```rust
   #[cfg(not(feature = "debug"))]
   pub fn debug_log(_msg: &str) {}
   ```

### ü•á –ü—Ä–æ–¥–≤–∏–Ω—É—Ç—ã–µ (4+ —á–∞—Å–æ–≤):
1. **Zero-copy –æ–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏**
   - –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å `#[account(zero_copy)]` 
   - –ü—Ä—è–º–∞—è —Ä–∞–±–æ—Ç–∞ —Å –±–∞–π—Ç–∞–º–∏

2. **–†–µ—Ñ–∞–∫—Ç–æ—Ä–∏–Ω–≥ –±–µ–∑ Anchor**
   - –ü–µ—Ä–µ–ø–∏—Å–∞—Ç—å –∫—Ä–∏—Ç–∏—á–µ—Å–∫–∏–µ —á–∞—Å—Ç–∏ –Ω–∞ –Ω–∞—Ç–∏–≤–Ω–æ–º Rust
   - –ü–æ—Ç–µ–Ω—Ü–∏–∞–ª: -100-200KB

---

## ‚ö†Ô∏è –í–ê–ñ–ù–´–ï –ó–ê–ú–ï–¢–ö–ò

### –î–∞, –Ω—É–∂–Ω–æ —Å–æ–±–∏—Ä–∞—Ç—å —Ç–∞–∫ –∫–∞–∂–¥—ã–π —Ä–∞–∑!
–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏–∏ —Ä–∞–±–æ—Ç–∞—é—Ç —Ç–æ–ª—å–∫–æ –ø—Ä–∏ —Å–±–æ—Ä–∫–µ —Å —Ñ–ª–∞–≥–∞–º–∏:
```bash
RUSTFLAGS="-C target-cpu=generic" anchor build
```

### –ê–≤—Ç–æ–º–∞—Ç–∏–∑–∞—Ü–∏—è —á–µ—Ä–µ–∑ alias:
```bash
# –î–æ–±–∞–≤–∏—Ç—å –≤ ~/.bashrc –∏–ª–∏ ~/.zshrc:
alias anchor-opt='RUSTFLAGS="-C target-cpu=generic" anchor build'

# –ò—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ:
anchor-opt
```

### –ò–ª–∏ —á–µ—Ä–µ–∑ Makefile:
```makefile
# Makefile
build-opt:
	RUSTFLAGS="-C target-cpu=generic" anchor build

.PHONY: build-opt
```

---

## üìä –ú–û–ù–ò–¢–û–†–ò–ù–ì –†–ê–ó–ú–ï–†–ê

### –ë—ã—Å—Ç—Ä–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
./scripts/analyze-program-size.sh
```

### –†—É—á–Ω–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞:
```bash
ls -lah target/deploy/solana_mafia.so
solana rent $(stat -f%z target/deploy/solana_mafia.so)
```

---

## üéâ –°–õ–ï–î–£–Æ–©–ò–ï –¶–ï–õ–ò

| –¶–µ–ª—å | –†–∞–∑–º–µ—Ä | –°—Ç–æ–∏–º–æ—Å—Ç—å | –≠–∫–æ–Ω–æ–º–∏—è |
|------|--------|-----------|----------|
| **–¢–µ–∫—É—â–∏–π** | 456KB | 3.25 SOL | ‚úÖ |
| **–£–¥–∞–ª–µ–Ω–∏–µ deps** | ~350KB | ~2.4 SOL | 40% |
| **–û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è –¥–∞–Ω–Ω—ã—Ö** | ~300KB | ~2.1 SOL | 49% |
| **–ú–∞–∫—Å–∏–º–∞–ª—å–Ω–∞—è** | ~200KB | ~1.4 SOL | 66% |

**–°–ª–µ–¥—É—é—â–∏–π —à–∞–≥:** –£–¥–∞–ª–µ–Ω–∏–µ –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã—Ö –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π –¥–ª—è –¥–æ—Å—Ç–∏–∂–µ–Ω–∏—è ~2.4 SOL

---

*–û–±–Ω–æ–≤–ª–µ–Ω–æ: $(date)*
*–†–µ–∑—É–ª—å—Ç–∞—Ç: —ç–∫–æ–Ω–æ–º–∏—è 0.87 SOL –Ω–∞ –∫–∞–∂–¥–æ–º –¥–µ–ø–ª–æ–µ!* üöÄ