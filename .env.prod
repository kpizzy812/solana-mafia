# ====================================================================================
# SOLANA MAFIA - PRODUCTION ENVIRONMENT CONFIGURATION
# ====================================================================================
# Production конфигурация на основе вашего dev .env, адаптированная для хостинга
# Server: 193.233.254.135 (Ubuntu 24)
# ====================================================================================

# === BASIC ENVIRONMENT SETTINGS ===
ENVIRONMENT=production
DEBUG=false
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=/app/logs/app.log

# === DATABASE CONFIGURATION ===
# Production PostgreSQL (Docker containers)
DATABASE_URL=postgresql://solana_mafia:secure_prod_password_2024@postgres:5432/solana_mafia_db
POSTGRES_DB=solana_mafia_db
POSTGRES_USER=solana_mafia
POSTGRES_PASSWORD=secure_prod_password_2024

# === REDIS CONFIGURATION ===  
# Production Redis (Docker containers)
REDIS_URL=redis://redis:6379/0
REDIS_HOST=redis
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=redis_prod_password_2024

# === SOLANA BLOCKCHAIN CONFIGURATION ===
# Keeping devnet for now as requested, same Helius endpoint
SOLANA_RPC_URL=https://devnet.helius-rpc.com/?api-key=0ecf20d9-719d-4946-be7e-be9b29cf8bca
SOLANA_WS_URL=wss://devnet.helius-rpc.com/?api-key=0ecf20d9-719d-4946-be7e-be9b29cf8bca
SOLANA_PROGRAM_ID=33FDNiVG3H3qNZYbQJbHVXeJG4n5ZfHL8bXuTieifQ3G

# === ADVANCED RPC CONFIGURATION ===
# Free plan limits (10 RPS total)
RPC_RATE_LIMIT=8                                # Conservative limit for free plan
RPC_BURST_LIMIT=15                              # Small burst allowance
RPC_TIMEOUT=30
RPC_MAX_RETRIES=3                               # Fewer retries to avoid hitting limits

# Backup RPC endpoints for free plan
BACKUP_RPC_URLS=https://api.devnet.solana.com,https://solana-api.projectserum.com
BACKUP_RPC_RATE_LIMITS=5,3                     # Conservative backup limits
RPC_PLAN_TYPE=free                              # Free plan
ENABLE_MULTIPLE_ENDPOINTS=true                   # Use load balancing in prod
ENABLE_ADAPTIVE_RATE_LIMIT=true

# === SECURITY & AUTHENTICATION ===
# Keep your existing secret key (it's properly generated)
SECRET_KEY=hYEz_HCqhXAmrTMrCQleiFYTjx7wSt0R2NueuAZ-IaID7Odq7wpJB4Xd8HaXqCrZK3LDehMF3zzkqCIjmg_xBQ

# === API SERVER CONFIGURATION ===
# Production server settings
HOST=0.0.0.0                                   # Accept from all interfaces
PORT=8000
CORS_ORIGINS=http://193.233.254.135,http://localhost:3000,http://localhost:3001

# === WEBSOCKET CONFIGURATION ===
WEBSOCKET_ENABLED=true
WEBSOCKET_HOST=0.0.0.0                         # Accept from all interfaces
WEBSOCKET_PORT=8001

# === RATE LIMITING ===
# Higher limits for production
RATE_LIMIT_ENABLED=true
RATE_LIMIT_REQUESTS=500                         # More requests per minute
RATE_LIMIT_WINDOW=60

# === ADMIN CONFIGURATION ===
# Keep your existing admin settings
ADMIN_WALLETS=HLWTn3BYB3jvgquBG323XLyqzEj11H4N5m6EMpPGCCG6
ADMIN_PRIVATE_KEY=5MBu1f5jjsUJK71fPwEhbVPKCzbJUmtVYdBPMAKrGWPiZpQUquU5D1rHhWpQSrcXYMYRYhAnQ1uoaMVForQEmiE

# === DYNAMIC PRICING SYSTEM ===
DYNAMIC_PRICING_ENABLED=true
PRICE_UPDATE_INTERVAL=300

# === INDEXER CONFIGURATION ===
# Conservative for free plan
INDEXER_BATCH_SIZE=500                          # Smaller batches for free plan
INDEXER_POLL_INTERVAL=5                         # Slower polling to save RPC calls
INDEXER_MAX_RETRIES=3                           # Fewer retries

# === EARNINGS SCHEDULER CONFIGURATION ===  
SCHEDULER_ENABLED=true
SCHEDULER_INTERVAL=60                           # Slower health checks for free plan
EARNINGS_SCHEDULE_UTC_HOUR=0
SCHEDULER_TIMEOUT_MINUTES=30                    # Conservative timeout

# === DATA SOURCE CONFIGURATION ===
USE_REAL_BLOCKCHAIN_DATA=true

# === BATCH PROCESSING ===
# Conservative for free plan to avoid RPC limits
BATCH_SIZE_ACCOUNTS=500                         # Moderate batch size
BATCH_SIZE_UPDATES=3                            # Smaller updates per transaction
MAX_CONCURRENT_UPDATES=20                       # Fewer parallel transactions
SCHEDULER_MAX_WORKERS=5

# === EARNINGS RATE LIMITING ===
# Conservative for free plan (10 RPS total)
EARNINGS_MAX_RPS=5                              # Reserve 5 RPS for earnings
EARNINGS_RESERVE_PERCENTAGE=60                  # 60% reserved for earnings
EARNINGS_BATCH_SIZE=5                           # Smaller batches to avoid timeouts
EARNINGS_BATCH_ENABLED=true

# === RETRY LOGIC ===
RETRY_DELAY_BASE=2                              # Slower retries for free plan
FAILED_PLAYER_RETRY_HOURS=1                     # Wait longer before retrying

# === TELEGRAM BOT CONFIGURATION ===
# Uncomment and configure when ready
# TELEGRAM_BOT_TOKEN=your_production_bot_token_here
# TELEGRAM_WEBHOOK_URL=http://193.233.254.135/telegram/webhook

# === SOCIAL MEDIA LINKS ===
SOCIAL_TWITTER_URL=https://twitter.com/SolanaMafia
SOCIAL_TELEGRAM_URL=https://t.me/SolanaMafia  
SOCIAL_TELEGRAM_CHAT_URL=https://t.me/SolanaMafiaChat
SOCIAL_CEO_CHANNEL_URL=https://t.me/SolanaMafiaCEO

# ====================================================================================
# FRONTEND (NEXT.JS) PRODUCTION CONFIGURATION 
# ====================================================================================

# === SOLANA FRONTEND CONFIGURATION ===
# Keep devnet as requested for testing
NEXT_PUBLIC_SOLANA_NETWORK=devnet
NEXT_PUBLIC_SOLANA_RPC_URL=https://devnet.helius-rpc.com/?api-key=0ecf20d9-719d-4946-be7e-be9b29cf8bca
NEXT_PUBLIC_PROGRAM_ID_DEVNET=33FDNiVG3H3qNZYbQJbHVXeJG4n5ZfHL8bXuTieifQ3G
NEXT_PUBLIC_PROGRAM_ID_LOCALNET=33FDNiVG3H3qNZYbQJbHVXeJG4n5ZfHL8bXuTieifQ3G

# === FRONTEND API CONFIGURATION ===
# Production URLs with server IP (will update when you get domain)
NEXT_PUBLIC_API_URL=http://193.233.254.135/api
NEXT_PUBLIC_WS_URL=ws://193.233.254.135/ws

# === SSL/TLS CONFIGURATION ===
# For future use when domain is configured
# SSL_CERTIFICATE_PATH=/etc/nginx/ssl/cert.pem
# SSL_PRIVATE_KEY_PATH=/etc/nginx/ssl/key.pem

# === MONITORING & ANALYTICS ===
# For future use
# SENTRY_DSN=your_sentry_dsn_for_error_tracking
# ANALYTICS_ID=your_analytics_id

# ====================================================================================
# NOTES FOR PRODUCTION
# ====================================================================================
# 1. Когда получите домен - замените 193.233.254.135 на ваш домен в:
#    - CORS_ORIGINS
#    - NEXT_PUBLIC_API_URL  
#    - NEXT_PUBLIC_WS_URL
#    - TELEGRAM_WEBHOOK_URL (если используете)
#
# 2. Увеличены лимиты и batch размеры для production нагрузки
# 3. Логи в JSON формате для production мониторинга
# 4. Все сервисы настроены на принятие подключений со всех интерфейсов (0.0.0.0)
# ====================================================================================