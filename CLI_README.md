# Solana Mafia CLI - –†—É–∫–æ–≤–æ–¥—Å—Ç–≤–æ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

–ö–æ–º–ø–ª–µ–∫—Å–Ω—ã–π –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç –∫–æ–º–∞–Ω–¥–Ω–æ–π —Å—Ç—Ä–æ–∫–∏ –¥–ª—è —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è –ø—Ä–æ–µ–∫—Ç–æ–º Solana Mafia –≤ —Ä–µ–∂–∏–º–µ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏ –∏ production –¥–µ–ø–ª–æ—è.

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

### –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å —É–ø—Ä–∞–≤–ª–µ–Ω–∏—è (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è)

```bash
# –ó–∞–ø—É—Å–∫ –∫—Ä–∞—Å–∏–≤–æ–π –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏ —Å –º–µ–Ω—é
./panel.sh
# –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–∞—è –∫–æ–º–∞–Ω–¥–∞:
./p

# –¢–∞–∫–∂–µ –º–æ–∂–Ω–æ –∑–∞–ø—É—Å—Ç–∏—Ç—å —á–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π CLI:
./sm panel
```

**üé® –í–æ–∑–º–æ–∂–Ω–æ—Å—Ç–∏ –ø–∞–Ω–µ–ª–∏:**
- –ö—Ä–∞—Å–∏–≤—ã–π TUI –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å —Å —Ü–≤–µ—Ç–∞–º–∏ –∏ ASCII –ª–æ–≥–æ—Ç–∏–ø–æ–º
- –ù–∞–≤–∏–≥–∞—Ü–∏—è –ø–æ –º–µ–Ω—é —Å –ø–æ–º–æ—â—å—é —Ü–∏—Ñ—Ä
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –≤–æ–∑–≤—Ä–∞—â–µ–Ω–∏–µ –≤ –º–µ–Ω—é –ø–æ—Å–ª–µ –∫–æ–º–∞–Ω–¥
- –°—Ç–∞—Ç—É—Å-–±–∞—Ä —Å –ø—Ä–æ–≤–µ—Ä–∫–æ–π —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- Health Check —Å–∏—Å—Ç–µ–º—ã
- –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—é

### –£—Å—Ç–∞–Ω–æ–≤–∫–∞ –∑–∞–≤–∏—Å–∏–º–æ—Å—Ç–µ–π

**macOS:**
```bash
# –£—Å—Ç–∞–Ω–æ–≤–∫–∞ sshpass –¥–ª—è —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ –¥–æ—Å—Ç—É–ø–∞
brew install hudochenkov/sshpass/sshpass
```

**Ubuntu/Debian:**
```bash
sudo apt-get update
sudo apt-get install sshpass rsync docker.io docker-compose
```

**CentOS/RHEL:**
```bash
sudo yum install sshpass rsync docker docker-compose
```

### –ù–∞—Å—Ç—Ä–æ–π–∫–∞ –æ–∫—Ä—É–∂–µ–Ω–∏—è

1. **–°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏–æ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**
```bash
# –î–ª—è –ª–æ–∫–∞–ª—å–Ω–æ–π —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
cp .env.example .env

# –î–ª—è production (–æ—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ –∑–Ω–∞—á–µ–Ω–∏—è!)
cp .env.prod.example .env.prod
```

2. **–ù–∞—Å—Ç—Ä–æ–π—Ç–µ production –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –≤ `.env.prod`:**
   - `POSTGRES_PASSWORD` - –Ω–∞–¥–µ–∂–Ω—ã–π –ø–∞—Ä–æ–ª—å –ë–î
   - `REDIS_PASSWORD` - –ø–∞—Ä–æ–ª—å –¥–ª—è Redis
   - `SECRET_KEY` - —Å–µ–∫—Ä–µ—Ç–Ω—ã–π –∫–ª—é—á –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
   - `SOLANA_RPC_URL` - mainnet RPC endpoint
   - `ADMIN_WALLETS` - –∞–¥—Ä–µ—Å–∞ admin –∫–æ—à–µ–ª—å–∫–æ–≤

## üìã –°–ø–æ—Å–æ–±—ã –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è

### üé® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å (—Ä–µ–∫–æ–º–µ–Ω–¥—É–µ—Ç—Å—è –¥–ª—è –Ω–æ–≤–∏—á–∫–æ–≤)

```bash
./p                    # –ö–æ—Ä–æ—Ç–∫–∏–π –∑–∞–ø—É—Å–∫ –ø–∞–Ω–µ–ª–∏
./panel.sh             # –ü–æ–ª–Ω–æ–µ –∏–º—è –ø–∞–Ω–µ–ª–∏
./sm panel             # –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π CLI
```

**–ü—Ä–µ–∏–º—É—â–µ—Å—Ç–≤–∞ –ø–∞–Ω–µ–ª–∏:**
- –í—Å–µ –∫–æ–º–∞–Ω–¥—ã –≤ –æ–¥–Ω–æ–º –º–µ–Ω—é —Å –æ–ø–∏—Å–∞–Ω–∏–µ–º
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –∫—Ä–∏—Ç–∏—á–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π
- –í–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –ø–æ—Å–ª–µ –∫–∞–∂–¥–æ–π –∫–æ–º–∞–Ω–¥—ã
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ –∏ Health Check

### ‚ö° –ë—ã—Å—Ç—Ä—ã–µ CLI –∫–æ–º–∞–Ω–¥—ã (–¥–ª—è –æ–ø—ã—Ç–Ω—ã—Ö –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª–µ–π)

```bash
./sm <–∫–æ–º–∞–Ω–¥–∞>         # –û—Å–Ω–æ–≤–Ω–æ–π CLI
# –∏–ª–∏
./solana-mafia-cli.sh <–∫–æ–º–∞–Ω–¥–∞>
```

## üìã –ö–æ–º–∞–Ω–¥—ã CLI

### –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞

```bash
# –ó–∞–ø—É—Å–∫ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤ –¥–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./solana-mafia-cli.sh dev-start
# –∏–ª–∏ –∫–æ—Ä–æ—Ç–∫–æ:
./sm dev-start

# –û—Å—Ç–∞–Ω–æ–≤–∫–∞ —Å–µ—Ä–≤–∏—Å–æ–≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./sm dev-stop

# –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫ —Å–µ—Ä–≤–∏—Å–æ–≤
./sm dev-restart

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./sm dev-logs

# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞
./sm dev-logs backend
./sm dev-logs frontend
./sm dev-logs postgres
./sm dev-logs redis
```

**–ü–æ—Å–ª–µ –∑–∞–ø—É—Å–∫–∞ –¥–æ—Å—Ç—É–ø–Ω—ã:**
- Frontend: http://localhost:3000
- Backend API: http://localhost:8000/docs  
- WebSocket: ws://localhost:8001

### Production –¥–µ–ø–ª–æ–π

```bash
# –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! –ü–µ—Ä–≤–æ–Ω–∞—á–∞–ª—å–Ω–∞—è –Ω–∞—Å—Ç—Ä–æ–π–∫–∞ —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞ (Ubuntu 24)
./sm setup-remote

# –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π (—Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è + —Å–±–æ—Ä–∫–∞ + –∑–∞–ø—É—Å–∫)
./sm deploy

# –¢–æ–ª—å–∫–æ —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤
./sm sync

# –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ production —Å–µ—Ä–≤–∏—Å–∞–º–∏
./sm prod-start             # –ó–∞–ø—É—Å–∫ –æ—Å–Ω–æ–≤–Ω—ã—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./sm prod-start-telegram    # –ó–∞–ø—É—Å–∫ —Å Telegram –±–æ—Ç–æ–º
./sm prod-stop              # –û—Å—Ç–∞–Ω–æ–≤–∫–∞
./sm prod-restart           # –ü–µ—Ä–µ–∑–∞–ø—É—Å–∫
./sm prod-rebuild           # –ü–µ—Ä–µ—Å–±–æ—Ä–∫–∞ –∏ –∑–∞–ø—É—Å–∫

# –ü—Ä–æ—Å–º–æ—Ç—Ä production –ª–æ–≥–æ–≤
./sm prod-logs              # –í—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./sm prod-logs backend      # –ö–æ–Ω–∫—Ä–µ—Ç–Ω—ã–π —Å–µ—Ä–≤–∏—Å
./sm prod-logs nginx        # –í–µ–±-—Å–µ—Ä–≤–µ—Ä
```

**‚ö†Ô∏è –í–ê–ñ–ù–û:** –ù–∞ —Ö–æ—Å—Ç–∏–Ω–≥–µ —Ä–∞–∑–≤–µ—Ä—Ç—ã–≤–∞–µ—Ç—Å—è —Ç–æ–ª—å–∫–æ –≤–µ–±-–ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ (backend + frontend + –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö). –°–º–∞—Ä—Ç-–∫–æ–Ω—Ç—Ä–∞–∫—Ç—ã –æ—Å—Ç–∞—é—Ç—Å—è –≤ –±–ª–æ–∫—á–µ–π–Ω–µ –∏ —Ä–∞–∑—Ä–∞–±–∞—Ç—ã–≤–∞—é—Ç—Å—è –ª–æ–∫–∞–ª—å–Ω–æ —Å –ø–æ–º–æ—â—å—é Anchor framework.

### –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –±–∞–∑–æ–π –¥–∞–Ω–Ω—ã—Ö

```bash
# –í—ã–ø–æ–ª–Ω–µ–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
./sm db-migrate dev         # –î–ª—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∏
./sm db-migrate prod        # –î–ª—è production

# –°–æ–∑–¥–∞–Ω–∏–µ –Ω–æ–≤–æ–π –º–∏–≥—Ä–∞—Ü–∏–∏
./sm db-create-migration "add_new_feature"

# –û—á–∏—Å—Ç–∫–∞ –±–∞–∑—ã –¥–∞–Ω–Ω—ã—Ö (–û–°–¢–û–†–û–ñ–ù–û!)
./sm db-clean dev           # –†–∞–∑—Ä–∞–±–æ—Ç–∫–∞
./sm db-clean prod          # Production (—Ç—Ä–µ–±—É–µ—Ç –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è)

# –°–æ–∑–¥–∞–Ω–∏–µ —Ä–µ–∑–µ—Ä–≤–Ω–æ–π –∫–æ–ø–∏–∏
./sm backup-db dev          # –õ–æ–∫–∞–ª—å–Ω–∞—è –ë–î
./sm backup-db prod         # Production –ë–î
```

### –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –∏ —Å—Ç–∞—Ç—É—Å

```bash
# –û–±—â–∏–π —Å—Ç–∞—Ç—É—Å –≤—Å–µ—Ö —Å–µ—Ä–≤–∏—Å–æ–≤
./sm status

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
./sm monitor dev            # –õ–æ–∫–∞–ª—å–Ω—ã–µ —Å–µ—Ä–≤–∏—Å—ã
./sm monitor prod           # Production —Å–µ—Ä–≤–∏—Å—ã

# –°–ø—Ä–∞–≤–∫–∞ –ø–æ –∫–æ–º–∞–Ω–¥–∞–º
./sm help
```

## üèóÔ∏è –ê—Ä—Ö–∏—Ç–µ–∫—Ç—É—Ä–∞ —Å–∏—Å—Ç–µ–º—ã

### –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞ —Ö–æ—Å—Ç–∏–Ω–≥–∞

CLI –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –Ω–∞—Å—Ç—Ä–∞–∏–≤–∞–µ—Ç —Å–µ—Ä–≤–µ—Ä Ubuntu 24 —á–µ—Ä–µ–∑ –∫–æ–º–∞–Ω–¥—É `setup-remote`:

**–ß—Ç–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è:**
- Docker –∏ Docker Compose v2
- UFW Firewall —Å –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏ –ø–æ—Ä—Ç–æ–≤ (22, 80, 443, 8000, 8001)
- Fail2ban –¥–ª—è –∑–∞—â–∏—Ç—ã –æ—Ç –±—Äute-force –∞—Ç–∞–∫
- Swap —Ñ–∞–π–ª (2GB) –¥–ª—è —Å—Ç–∞–±–∏–ª—å–Ω–æ—Å—Ç–∏ —Ä–∞–±–æ—Ç—ã
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –æ—á–∏—Å—Ç–∫–∞ Docker –æ–±—Ä–∞–∑–æ–≤ (cron)
- Systemd —Å–µ—Ä–≤–∏—Å –¥–ª—è –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- –û–ø—Ç–∏–º–∏–∑–∞—Ü–∏—è —Å–µ—Ç–µ–≤—ã—Ö –ø–∞—Ä–∞–º–µ—Ç—Ä–æ–≤

**–°—Ç—Ä—É–∫—Ç—É—Ä–∞ –¥–∏—Ä–µ–∫—Ç–æ—Ä–∏–π:**
- `/opt/solana-mafia/` - –æ—Å–Ω–æ–≤–Ω–æ–π –∫–æ–¥ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `/opt/solana-mafia/backups/` - —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î
- `/opt/solana-mafia/logs/` - –ª–æ–≥–∏ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è
- `/opt/solana-mafia/ssl/` - SSL —Å–µ—Ä—Ç–∏—Ñ–∏–∫–∞—Ç—ã (–¥–ª—è –±—É–¥—É—â–µ–≥–æ –¥–æ–º–µ–Ω–∞)
- `/var/log/solana-mafia/` - —Å–∏—Å—Ç–µ–º–Ω—ã–µ –ª–æ–≥–∏

### –°–µ—Ä–≤–∏—Å—ã –ø—Ä–æ–µ–∫—Ç–∞

**Development (docker-compose.dev.yml):**
- `postgres` - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `redis` - –ö–µ—à Redis  
- `backend` - FastAPI API —Å–µ—Ä–≤–µ—Ä
- `frontend` - Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥

**Production (docker-compose.prod.yml):**
- `postgres` - –ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö PostgreSQL
- `redis` - –ö–µ—à Redis
- `backend` - FastAPI API —Å–µ—Ä–≤–µ—Ä (4 workers)
- `frontend` - Next.js —Ñ—Ä–æ–Ω—Ç–µ–Ω–¥ (optimized build)
- `indexer` - –°–µ—Ä–≤–∏—Å –∏–Ω–¥–µ–∫—Å–∞—Ü–∏–∏ blockchain —Å–æ–±—ã—Ç–∏–π
- `scheduler` - –ü–ª–∞–Ω–∏—Ä–æ–≤—â–∏–∫ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏—Ö –≤—ã–ø–ª–∞—Ç
- `websocket` - WebSocket —Å–µ—Ä–≤–µ—Ä –¥–ª—è real-time –æ–±–Ω–æ–≤–ª–µ–Ω–∏–π
- `telegram-bot` - Telegram –±–æ—Ç —Å–µ—Ä–≤–∏—Å (–æ–ø—Ü–∏–æ–Ω–∞–ª—å–Ω–æ)
- `nginx` - –†–µ–≤–µ—Ä—Å-–ø—Ä–æ–∫—Å–∏ –∏ load balancer

### –ö–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è —Å–µ—Ä–≤–µ—Ä–∞

**Server details:**
- IP: 193.233.254.135
- User: root
- –î–∏—Ä–µ–∫—Ç–æ—Ä–∏—è –ø—Ä–æ–µ–∫—Ç–∞: `/opt/solana-mafia`

**Nginx routing:**
- `/` ‚Üí Frontend (Next.js)
- `/api/` ‚Üí Backend API
- `/ws/` ‚Üí WebSocket server

## üîß –ü—Ä–æ–¥–≤–∏–Ω—É—Ç–æ–µ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ

### –°–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è —Ñ–∞–π–ª–æ–≤

CLI –∏—Å–ø–æ–ª—å–∑—É–µ—Ç `rsync` —Å —Ñ–∞–π–ª–æ–º –∏—Å–∫–ª—é—á–µ–Ω–∏–π `.rsyncignore`. –ò—Å–∫–ª—é—á–∞—é—Ç—Å—è:
- `node_modules/`, `target/`, `.git/`
- –õ–æ–≥–∏ –∏ –≤—Ä–µ–º–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã
- Development —Å–∫—Ä–∏–ø—Ç—ã –∏ —Ç–µ—Å—Ç—ã
- Build –∞—Ä—Ç–µ—Ñ–∞–∫—Ç—ã

### Environment —Ñ–∞–π–ª—ã

**Development (.env):**
- –ò—Å–ø–æ–ª—å–∑—É–µ—Ç localhost endpoints
- –û—Ç–ª–∞–¥–æ—á–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –≤–∫–ª—é—á–µ–Ω—ã
- –ü—Ä–æ—Å—Ç—ã–µ –ø–∞—Ä–æ–ª–∏ –¥–ª—è dev –ë–î

**Production (.env.prod):**
- Production-ready –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- –ù–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –∏ —Å–µ–∫—Ä–µ—Ç—ã
- Mainnet RPC endpoints
- –û–ø—Ç–∏–º–∏–∑–∏—Ä–æ–≤–∞–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ –ø—Ä–æ–∏–∑–≤–æ–¥–∏—Ç–µ–ª—å–Ω–æ—Å—Ç–∏

### –õ–æ–≥–∏ –∏ –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥

```bash
# –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å —Ñ–∏–ª—å—Ç—Ä–∞—Ü–∏–µ–π
./sm prod-logs backend | grep ERROR
./sm prod-logs nginx | tail -100

# –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ –≤ —Ä–µ–∞–ª—å–Ω–æ–º –≤—Ä–µ–º–µ–Ω–∏
./sm prod-logs        # –°–ª–µ–¥–∏—Ç –∑–∞ –≤—Å–µ–º–∏ –ª–æ–≥–∞–º–∏
./sm monitor prod     # –ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏–µ —Ä–µ—Å—É—Ä—Å–æ–≤
```

### –†–µ–∑–µ—Ä–≤–Ω–æ–µ –∫–æ–ø–∏—Ä–æ–≤–∞–Ω–∏–µ

```bash
# –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–æ–µ –∏–º–µ–Ω–æ–≤–∞–Ω–∏–µ –±—ç–∫–∞–ø–æ–≤ —Å –¥–∞—Ç–æ–π
./sm backup-db prod
# –°–æ–∑–¥–∞—Å—Ç: backups/backup_20241201_143022.sql

# –í–æ—Å—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–∏–µ –∏–∑ –±—ç–∫–∞–ø–∞ (–≤—Ä—É—á–Ω—É—é)
docker-compose -f docker-compose.prod.yml exec -T postgres psql -U solana_mafia -d solana_mafia_db < backups/backup_20241201_143022.sql
```

## ‚ö†Ô∏è –í–∞–∂–Ω—ã–µ –∑–∞–º–µ—á–∞–Ω–∏—è

### –ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å

1. **–ù–∏–∫–æ–≥–¥–∞ –Ω–µ –∫–æ–º–º–∏—Ç—å—Ç–µ .env.prod —Ñ–∞–π–ª—ã –≤ Git**
2. **–ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ –Ω–∞–¥–µ–∂–Ω—ã–µ –ø–∞—Ä–æ–ª–∏ –≤ production**
3. **–†–µ–≥—É–ª—è—Ä–Ω–æ —Å–æ–∑–¥–∞–≤–∞–π—Ç–µ —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏ –ë–î**
4. **–ú–æ–Ω–∏—Ç–æ—Ä—å—Ç–µ –ª–æ–≥–∏ –Ω–∞ –ø—Ä–µ–¥–º–µ—Ç –æ—à–∏–±–æ–∫ –∏ –∞—Ç–∞–∫**

### Production –¥–µ–ø–ª–æ–π

1. **–†–µ–∫–æ–º–µ–Ω–¥—É–µ–º—ã–π —Å–ø–æ—Å–æ–± (—á–µ—Ä–µ–∑ –ø–∞–Ω–µ–ª—å):**
```bash
./p                  # –ó–∞–ø—É—Å–∫ –∏–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–æ–π –ø–∞–Ω–µ–ª–∏
# –í –º–µ–Ω—é –≤—ã–±–µ—Ä–∏—Ç–µ:
# 5 ‚Üí –ù–∞—Å—Ç—Ä–æ–∏—Ç—å —É–¥–∞–ª–µ–Ω–Ω—ã–π —Å–µ—Ä–≤–µ—Ä (–æ–¥–∏–Ω —Ä–∞–∑)
# 6 ‚Üí –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π –Ω–∞ production
```

2. **–ß–µ—Ä–µ–∑ CLI –∫–æ–º–∞–Ω–¥—ã:**
```bash
./sm setup-remote    # –û–ë–Ø–ó–ê–¢–ï–õ–¨–ù–û! –ù–∞—Å—Ç—Ä–æ–π–∫–∞ Ubuntu 24 —Å–µ—Ä–≤–µ—Ä–∞
# –û—Ç—Ä–µ–¥–∞–∫—Ç–∏—Ä—É–π—Ç–µ .env.prod —Å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–º–∏ –Ω–∞—Å—Ç—Ä–æ–π–∫–∞–º–∏
./sm deploy          # –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π
```

3. **–û–±–Ω–æ–≤–ª–µ–Ω–∏–µ –ø–æ—Å–ª–µ –∏–∑–º–µ–Ω–µ–Ω–∏–π:**
```bash
./sm sync            # –ë—ã—Å—Ç—Ä–∞—è —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏—è
./sm prod-restart    # –ï—Å–ª–∏ –Ω—É–∂–µ–Ω —Ç–æ–ª—å–∫–æ –ø–µ—Ä–µ–∑–∞–ø—É—Å–∫
./sm prod-rebuild    # –ï—Å–ª–∏ –∏–∑–º–µ–Ω–∏–ª–∏—Å—å Dockerfile'—ã
```

4. **–î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ –æ–ø—Ü–∏–∏:**
```bash
# –ó–∞–ø—É—Å–∫ —Å Telegram –±–æ—Ç–æ–º (–µ—Å–ª–∏ –Ω–∞—Å—Ç—Ä–æ–µ–Ω TELEGRAM_BOT_TOKEN –≤ .env.prod)
./sm prod-start-telegram

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –∞–≤—Ç–æ–∑–∞–ø—É—Å–∫–∞ –ø—Ä–∏ –ø–µ—Ä–µ–∑–∞–≥—Ä—É–∑–∫–µ —Å–µ—Ä–≤–µ—Ä–∞
sudo systemctl status solana-mafia
```

5. **–ü—Ä–æ–≤–µ—Ä–∫–∞ —Ä–∞–±–æ—Ç–æ—Å–ø–æ—Å–æ–±–Ω–æ—Å—Ç–∏:**
```bash
./sm status          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –≤—Å–µ —Å–µ—Ä–≤–∏—Å—ã
./sm monitor prod    # –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
curl -f http://193.233.254.135/api/health  # –ü—Ä–æ–≤–µ—Ä–∫–∞ API
```

### –£—Å—Ç—Ä–∞–Ω–µ–Ω–∏–µ –Ω–µ–ø–æ–ª–∞–¥–æ–∫

**–ï—Å–ª–∏ —Å–µ—Ä–≤–∏—Å—ã –Ω–µ –∑–∞–ø—É—Å–∫–∞—é—Ç—Å—è:**
```bash
./sm prod-logs       # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å –ª–æ–≥–∏ –æ—à–∏–±–æ–∫
./sm status          # –ü—Ä–æ–≤–µ—Ä–∏—Ç—å —Å—Ç–∞—Ç—É—Å
./sm prod-rebuild    # –ü–µ—Ä–µ—Å–æ–±—Ä–∞—Ç—å –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö —Å –æ–±—Ä–∞–∑–∞–º–∏
```

**–ï—Å–ª–∏ –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö –Ω–µ–¥–æ—Å—Ç—É–ø–Ω–∞:**
```bash
./sm prod-logs postgres
./sm db-migrate prod  # –ü—Ä–∏–º–µ–Ω–∏—Ç—å –º–∏–≥—Ä–∞—Ü–∏–∏ –∑–∞–Ω–æ–≤–æ
```

**–ü—Ä–æ–±–ª–µ–º—ã —Å —Å–∏–Ω—Ö—Ä–æ–Ω–∏–∑–∞—Ü–∏–µ–π:**
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —Å–µ—Ä–≤–µ—Ä–∞: `ping 193.233.254.135`
- –ü—Ä–æ–≤–µ—Ä—å—Ç–µ sshpass: `sshpass -V`
- –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ —Ñ–∞–π–ª—ã .rsyncignore –∫–æ—Ä—Ä–µ–∫—Ç–Ω—ã

## üìö –î–æ–ø–æ–ª–Ω–∏—Ç–µ–ª—å–Ω—ã–µ —Ä–µ—Å—É—Ä—Å—ã

- [CLAUDE.md](./CLAUDE.md) - –ü–æ–¥—Ä–æ–±–Ω–∞—è –¥–æ–∫—É–º–µ–Ω—Ç–∞—Ü–∏—è –ø—Ä–æ–µ–∫—Ç–∞
- [docker-compose.yml](./docker-compose.yml) - –ü–æ–ª–Ω–∞—è production –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [docker-compose.dev.yml](./docker-compose.dev.yml) - Development –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è
- [nginx.prod.conf](./nginx.prod.conf) - Production Nginx –∫–æ–Ω—Ñ–∏–≥—É—Ä–∞—Ü–∏—è

## üÜò –ü–æ–¥–¥–µ—Ä–∂–∫–∞

–ü—Ä–∏ –≤–æ–∑–Ω–∏–∫–Ω–æ–≤–µ–Ω–∏–∏ –ø—Ä–æ–±–ª–µ–º:

1. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏: `./sm prod-logs` –∏–ª–∏ `./sm dev-logs`
2. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å: `./sm status`  
3. –£–±–µ–¥–∏—Ç–µ—Å—å —á—Ç–æ –≤—Å–µ environment –ø–µ—Ä–µ–º–µ–Ω–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–µ–Ω—ã
4. –î–ª—è production: –ø—Ä–æ–≤–µ—Ä—å—Ç–µ –¥–æ—Å—Ç—É–ø–Ω–æ—Å—Ç—å —É–¥–∞–ª–µ–Ω–Ω–æ–≥–æ —Å–µ—Ä–≤–µ—Ä–∞

**–ü–æ–ª–µ–∑–Ω—ã–µ –∫–æ–º–∞–Ω–¥—ã –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏:**
```bash
# –ü—Ä–æ–≤–µ—Ä–∫–∞ Docker
docker ps -a
docker-compose ps

# –ü—Ä–æ–≤–µ—Ä–∫–∞ —Å–µ—Ç–∏
curl -f http://localhost:8000/health    # Dev
curl -f http://193.233.254.135/api/health  # Prod

# –ü—Ä–æ–≤–µ—Ä–∫–∞ –ª–æ–≥–æ–≤
./sm prod-logs | grep -i error
./sm monitor prod
```

## üé® –ò–Ω—Ç–µ—Ä–∞–∫—Ç–∏–≤–Ω–∞—è –ø–∞–Ω–µ–ª—å - –ø–æ–¥—Ä–æ–±–Ω–µ–µ

### –ó–∞–ø—É—Å–∫ –ø–∞–Ω–µ–ª–∏

```bash
./p                # –°–∞–º—ã–π –∫–æ—Ä–æ—Ç–∫–∏–π —Å–ø–æ—Å–æ–±
./panel.sh         # –ü–æ–ª–Ω–æ–µ –∏–º—è
./sm panel         # –ß–µ—Ä–µ–∑ –æ—Å–Ω–æ–≤–Ω–æ–π CLI
```

### –°—Ç—Ä—É–∫—Ç—É—Ä–∞ –º–µ–Ω—é

**üè† –õ–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞ (–ø—É–Ω–∫—Ç—ã 1-4):**
- –ó–∞–ø—É—Å–∫/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞/–ø–µ—Ä–µ–∑–∞–ø—É—Å–∫ dev –æ–∫—Ä—É–∂–µ–Ω–∏—è
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ —Å –≤—ã–±–æ—Ä–æ–º –∫–æ–Ω–∫—Ä–µ—Ç–Ω–æ–≥–æ —Å–µ—Ä–≤–∏—Å–∞

**üåê Production –¥–µ–ø–ª–æ–π (–ø—É–Ω–∫—Ç—ã 5-8):**
- –ù–∞—Å—Ç—Ä–æ–π–∫–∞ —Å–µ—Ä–≤–µ—Ä–∞ (–≤—ã–ø–æ–ª–Ω—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑)
- –ü–æ–ª–Ω—ã–π –¥–µ–ø–ª–æ–π –∏ —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ —Å–µ—Ä–≤–∏—Å–∞–º–∏
- –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å production —Å –¥–µ—Ç–∞–ª—å–Ω—ã–º —É–ø—Ä–∞–≤–ª–µ–Ω–∏–µ–º

**üóÑÔ∏è –£–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ë–î (–ø—É–Ω–∫—Ç—ã 9-12):**
- –ú–∏–≥—Ä–∞—Ü–∏–∏, —Ä–µ–∑–µ—Ä–≤–Ω—ã–µ –∫–æ–ø–∏–∏, —Å–æ–∑–¥–∞–Ω–∏–µ –º–∏–≥—Ä–∞—Ü–∏–π
- –û—Ç–¥–µ–ª—å–Ω–∞—è –ø–∞–Ω–µ–ª—å –ë–î —Å —Ä–∞–∑–¥–µ–ª–µ–Ω–∏–µ–º dev/production

**üìä –ú–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ (–ø—É–Ω–∫—Ç—ã 13-16):**
- –°—Ç–∞—Ç—É—Å —Å–µ—Ä–≤–∏—Å–æ–≤, –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥ —Ä–µ—Å—É—Ä—Å–æ–≤
- Health Check —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π
- –ü—Ä–æ—Å–º–æ—Ç—Ä –ª–æ–≥–æ–≤ production —Å –≤—ã–±–æ—Ä–æ–º —Å–µ—Ä–≤–∏—Å–∞

### –û—Å–æ–±–µ–Ω–Ω–æ—Å—Ç–∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å–∞

**–¶–≤–µ—Ç–æ–≤–∞—è —Å—Ö–µ–º–∞:**
- üü¢ –ó–µ–ª–µ–Ω—ã–π - –ª–æ–∫–∞–ª—å–Ω–∞—è —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–∞
- üü£ –§–∏–æ–ª–µ—Ç–æ–≤—ã–π - production –æ–ø–µ—Ä–∞—Ü–∏–∏  
- üü° –ñ–µ–ª—Ç—ã–π - –±–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö
- üîµ –°–∏–Ω–∏–π - –º–æ–Ω–∏—Ç–æ—Ä–∏–Ω–≥
- üî¥ –ö—Ä–∞—Å–Ω—ã–π - –∫—Ä–∏—Ç–∏—á–Ω—ã–µ –æ–ø–µ—Ä–∞—Ü–∏–∏

**–ë–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç—å:**
- –ü–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏—è –¥–ª—è –æ–ø–∞—Å–Ω—ã—Ö –æ–ø–µ—Ä–∞—Ü–∏–π (–æ—á–∏—Å—Ç–∫–∞ –ë–î, p–µ—Ä–µ—Å–±–æ—Ä–∫–∞)
- –î–≤–æ–π–Ω–æ–µ –ø–æ–¥—Ç–≤–µ—Ä–∂–¥–µ–Ω–∏–µ –¥–ª—è production –ë–î
- –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∞—è –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ç—Ä–µ–±–æ–≤–∞–Ω–∏–π –ø–µ—Ä–µ–¥ –∑–∞–ø—É—Å–∫–æ–º

**–£–¥–æ–±—Å—Ç–≤–æ:**
- –°—Ç–∞—Ç—É—Å-–±–∞—Ä –ø–æ–∫–∞–∑—ã–≤–∞–µ—Ç —Å–æ—Å—Ç–æ—è–Ω–∏–µ –ª–æ–∫–∞–ª—å–Ω—ã—Ö –∏ production —Å–µ—Ä–≤–∏—Å–æ–≤
- –ê–≤—Ç–æ–≤–æ–∑–≤—Ä–∞—Ç –≤ –º–µ–Ω—é –ø–æ—Å–ª–µ –≤—ã–ø–æ–ª–Ω–µ–Ω–∏—è –∫–æ–º–∞–Ω–¥—ã
- –í—Å—Ç—Ä–æ–µ–Ω–Ω–∞—è —Å–ø—Ä–∞–≤–∫–∞ (–ø—É–Ω–∫—Ç h)
- Health Check —Å –¥–µ—Ç–∞–ª—å–Ω–æ–π –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–æ–π (–ø—É–Ω–∫—Ç 16)

**–ù–∞–≤–∏–≥–∞—Ü–∏—è:**
- –ò—Å–ø–æ–ª—å–∑—É–π—Ç–µ —Ü–∏—Ñ—Ä—ã –¥–ª—è –≤—ã–±–æ—Ä–∞ –ø—É–Ω–∫—Ç–æ–≤ –º–µ–Ω—é
- `0` - –≤–æ–∑–≤—Ä–∞—Ç –≤ –ø—Ä–µ–¥—ã–¥—É—â–µ–µ –º–µ–Ω—é –∏–ª–∏ –≤—ã—Ö–æ–¥
- `h` - —Å–ø—Ä–∞–≤–∫–∞ –≤ –≥–ª–∞–≤–Ω–æ–º –º–µ–Ω—é
- `Ctrl+C` - —ç–∫—Å—Ç—Ä–µ–Ω–Ω—ã–π –≤—ã—Ö–æ–¥